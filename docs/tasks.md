
# Задачи по реализации приложения TalkPaste

## Зависимости между пользовательскими историями

Все пользовательские истории могут быть реализованы относительно независимо после завершения "Фазы 1: Настройка проекта" и "Фазы 2: Фундаментальная подготовка".

## Примеры параллельного выполнения

- После завершения Фазы 1 и Фазы 2, можно параллельно работать над задачами, относящимися к UI виджета (US1), распознаванию речи (US2), значку в трее (US3) и настройкам (US4).

## Стратегия реализации

Мы будем придерживаться итеративного подхода, фокусируясь на создании минимально жизнеспособного продукта (MVP) и его постепенном расширении. MVP будет включать в себя базовую функциональность распознавания речи и вставки текста с основным виджетом. Остальные функции будут добавляться по мере готовности.

## Фаза 1: Настройка проекта

### Цель фазы: Подготовить базовую структуру проекта Flutter и настроить окружение.

- [ ] T001 Создать Flutter-проект в директории `frontend/`.
- [ ] T002 Добавить необходимые зависимости в `frontend/pubspec.yaml` (`speech_to_text`, `hotkey_manager`, `system_tray`, `window_manager`, `shared_preferences`, `path_provider`, `animations`).
- [ ] T003 Создать базовую структуру директорий в `frontend/lib/app/` согласно `plan.md`.
- [ ] T004 Разместить статические ассеты (изображения) в `frontend/assets/` и прописать их в `frontend/pubspec.yaml`.

## Фаза 2: Фундаментальная подготовка

### Цель фазы: Реализовать базовые сервисы для взаимодействия с ОС и сохранения настроек.

- [ ] T005 [P] Создать модель настроек `AppSettings` в `frontend/lib/app/models/app_settings.dart`.
- [ ] T006 [P] Реализовать `SettingsService` для сохранения и загрузки настроек в `frontend/lib/app/services/settings_service.dart`.
- [ ] T007 [P] Инициализировать `SettingsService` в `frontend/lib/main.dart`.

## Фаза 3: Пользовательская история 1 (US1) - Основной виджет и его состояния

### Цель истории: Реализовать интерактивный виджет TalkPaste на рабочем столе.
### Критерии независимого тестирования: Виджет отображается, перемещается, анимируется при наведении и при активации.

- [ ] T008 [US1] Создать основной виджет `TalkPasteWidget` в `frontend/lib/app/ui/widgets/talkpaste_widget.dart`.
- [ ] T009 [US1] Реализовать логику позиционирования виджета по умолчанию (правый нижний угол) и возможность его перемещения по экрану в `frontend/lib/app/ui/widgets/talkpaste_widget.dart`.
- [ ] T010 [US1] Добавить анимацию увеличения при наведении курсора на виджет (`cursor-pointer.png`) в `frontend/lib/app/ui/widgets/talkpaste_widget.dart`.
- [ ] T011 [US1] Реализовать логику "поверх всех окон" с использованием `window_manager` в `frontend/lib/app/services/window_management_service.dart` и применить к `TalkPasteWidget`.
- [ ] T012 [US1] Интегрировать `WindowManagementService` в `frontend/lib/main.dart`.

## Фаза 4: Пользовательская история 2 (US2) - Распознавание речи и вставка текста

### Цель истории: Внедрить функциональность распознавания речи и автоматической вставки текста.
### Критерии независимого тестирования: Распознавание речи по горячей клавише, визуализация эквалайзера, вставка текста.

- [ ] T013 [US2] Реализовать `SpeechRecognitionService` для взаимодействия с `speech_to_text` в `frontend/lib/app/services/speech_recognition_service.dart`.
- [ ] T014 [US2] Реализовать `HotkeyService` для отслеживания глобальных комбинаций клавиш (`Ctrl + Space` по умолчанию) в `frontend/lib/app/services/hotkey_service.dart`.
- [ ] T015 [US2] Интегрировать `SpeechRecognitionService` и `HotkeyService` в `frontend/lib/main.dart` или `talkpaste_app.dart`.
- [ ] T016 [US2] Добавить анимацию эквалайзера (`equalizer_animation_widget.dart`) в `frontend/lib/app/ui/widgets/equalizer_animation_widget.dart`.
- [ ] T017 [US2] Интегрировать эквалайзер в `TalkPasteWidget` и связать его с интенсивностью звука из `SpeechRecognitionService`.
- [ ] T018 [US2] Реализовать логику вставки распознанного текста при отпускании комбинации клавиш (использование пакета для взаимодействия с буфером обмена/вводом, если требуется).

## Фаза 5: Пользовательская история 3 (US3) - Значок в трее и контекстное меню

### Цель истории: Добавить значок в системный трей с контекстным меню.
### Критерии независимого тестирования: Значок в трее присутствует, контекстное меню открывается.

- [ ] T019 [US3] Реализовать `SystemTrayService` для управления значком в трее в `frontend/lib/app/services/system_tray_service.dart`.
- [ ] T020 [US3] Интегрировать `SystemTrayService` в `frontend/lib/main.dart`.
- [ ] T021 [US3] Добавить контекстное меню к значку в трее с пунктом "Настройки".

## Фаза 6: Пользовательская история 4 (US4) - Экран настроек

### Цель истории: Создать экран настроек для управления поведением приложения.
### Критерии независимого тестирования: Экран настроек открывается, все чекбоксы и поле ввода работают, настройки сохраняются и применяются.

- [ ] T022 [US4] Создать экран `SettingsScreen` в `frontend/lib/app/ui/screens/settings_screen.dart`.
- [ ] T023 [US4] Добавить поле для изменения комбинации клавиш в `SettingsScreen` и связать его с `HotkeyService` через `SettingsService`.
- [ ] T024 [US4] Добавить чекбокс "Показывать поверх всех окон" в `SettingsScreen` и связать его с `WindowManagementService` через `SettingsService`.
- [ ] T025 [US4] Добавить чекбокс "Скрыть виджет" в `SettingsScreen` и связать его с видимостью `TalkPasteWidget` через `SettingsService`.
- [ ] T026 [US4] Реализовать `StartupService` для управления автозапуском при старте Windows в `frontend/lib/app/services/startup_service.dart`.
- [ ] T027 [US4] Добавить чекбокс "Запускать при старте Windows" в `SettingsScreen` и связать его с `StartupService` через `SettingsService`.
- [ ] T028 [US4] Реализовать открытие `SettingsScreen` при выборе соответствующего пункта из контекстного меню значка в трее.

## Фаза 7: Полировка и кросс-функциональные аспекты

### Цель фазы: Обеспечить стабильность, удобство использования и качество приложения.

- [ ] T029 Настроить сборку приложения для Windows и создание установщика.
- [ ] T030 Оптимизировать анимации и переходы для большей плавности.
- [ ] T031 Провести общее тестирование функциональности и пользовательского опыта.
- [ ] T032 Обработать краевые случаи и возможные ошибки (например, отсутствие подключения к интернету для распознавания речи).
- [ ] T033 Добавить иконку для приложения и установщика.
